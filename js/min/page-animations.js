const GLITCH_CHARS="01@#$%&*[]{}01010101><~^+=?/\\|";function animateTextGlitch(t,e,a=800){if(!t)return;const n=t.textContent||"",o=Math.max(n.length,e.length),s=performance.now(),i=Array.from({length:o},()=>.5*Math.random());requestAnimationFrame(function n(r){const l=r-s,c=Math.min(l/a,1);let y="";for(let t=0;t<o;t++){const a=Math.min(Math.max((c-i[t])/.5,0),1);a<1&&Math.random()>a?y+=GLITCH_CHARS[Math.floor(30*Math.random())]:y+=e[t]||""}t.textContent=y,c<1?requestAnimationFrame(n):t.textContent=e})}function animateTextTypewriter(t,e,a=1e3){if(!t)return;t.textContent="";const n=performance.now();requestAnimationFrame(function o(s){const i=s-n,r=Math.min(i/a,1),l=Math.floor(e.length*r);r<1?(t.textContent=e.substring(0,l)+"â–Œ",requestAnimationFrame(o)):t.textContent=e})}function initPageAnimations(){const t=document.getElementById("content");if(!t)return;let e=null;const a={root:null,rootMargin:"0px 0px -100px 0px",threshold:.1},n=(new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&!t.target.dataset.animated&&(t.target.dataset.animated="true",t.target.classList.contains("scroll-animate")&&(t.target.style.opacity="1",t.target.style.transform="translateY(0)"))})},a),t.querySelector("h1"));if(n){const t=n.textContent.trim();setTimeout(()=>{animateTextGlitch(n,t,800)},100)}const o=t.querySelector(".swiper-container");if(o){o.style.opacity="0",o.style.transition="opacity 0.8s ease";const a=t.querySelectorAll("hr");console.log("[Page Animations] Total hrs found:",a.length),a.length>1&&(e=a[1],console.log("[Page Animations] Setting swiperHrElement (index 1):",e),e.style.opacity="0",e.style.transition="opacity 0.8s ease"),setTimeout(()=>{o.style.opacity="1",e&&(e.style.opacity="1",console.log("[Page Animations] Fading in swiperHrElement"))},100)}const s=o?900:100,i=t.querySelector("h2");if(i){const t=i.textContent.trim();i.style.opacity="0",i.style.transition="opacity 0.6s ease";new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&!e.target.dataset.animated&&(e.target.dataset.animated="true",setTimeout(()=>{e.target.style.opacity="1",animateTextGlitch(e.target,t,600)},100))})},a).observe(i)}const r=t.querySelector("h4");if(r){const t=r.textContent.trim();r.style.opacity="0",r.style.transition="opacity 0.6s ease";new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&!e.target.dataset.animated&&(e.target.dataset.animated="true",setTimeout(()=>{e.target.style.opacity="1",animateTextGlitch(e.target,t,500)},100))})},a).observe(r)}const l=t.querySelectorAll("h3");if(l.length>0){const t=l[0],e=t.querySelectorAll("a");t.style.opacity="0",t.style.transition="opacity 0.6s ease";new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&!t.target.dataset.animated&&(t.target.dataset.animated="true",t.target.style.opacity="1",e.forEach((t,e)=>{const a=t.textContent.trim();setTimeout(()=>{animateTextGlitch(t,a,600)},100*e)}))})},a).observe(t)}for(let t=1;t<l.length;t++){const e=l[t],n=e.textContent.trim();e.style.opacity="0",e.style.transition="opacity 0.6s ease";new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&!t.target.dataset.animated&&(t.target.dataset.animated="true",setTimeout(()=>{t.target.style.opacity="1",t.target.textContent="",animateTextTypewriter(t.target,n,800)},100))})},a).observe(e)}t.querySelectorAll("#content_in").forEach((t,e)=>{t.style.opacity="0",t.style.transform="translateY(20px)",t.style.transition="opacity 0.6s ease, transform 0.6s ease";new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&!t.target.dataset.animated&&(t.target.dataset.animated="true",setTimeout(()=>{t.target.style.opacity="1",t.target.style.transform="translateY(0)";Array.from(t.target.children).forEach((t,e)=>{t.style.opacity="0",t.style.transform="translateY(10px)",t.style.transition="opacity 0.4s ease, transform 0.4s ease",setTimeout(()=>{t.style.opacity="1",t.style.transform="translateY(0)"},80*e)})},100))})},a).observe(t)});t.querySelectorAll("img").forEach((t,e)=>{t.style.opacity="0",t.style.transition="opacity 0.6s ease",t.complete?setTimeout(()=>{t.style.opacity="1"},300+50*e):t.addEventListener("load",()=>{setTimeout(()=>{t.style.opacity="1"},300+50*e)})});t.querySelectorAll("iframe").forEach((t,e)=>{t.style.opacity="0",t.style.transition="opacity 0.6s ease",setTimeout(()=>{t.style.opacity="1"},400+100*e)});t.querySelectorAll("hr").forEach((t,a)=>{if(console.log(`[Page Animations] Processing hr index ${a}, is swiperHr:`,t===e),0===a)return t.style.opacity="1",void console.log(`[Page Animations] hr ${a}: keeping visible (first hr)`);t!==e?(console.log(`[Page Animations] hr ${a}: will fade in at ${s+600+100*a}ms`),t.style.opacity="0",t.style.transition="opacity 0.4s ease",setTimeout(()=>{t.style.opacity="1",console.log(`[Page Animations] hr ${a}: faded in`)},s+600+100*a)):console.log(`[Page Animations] hr ${a}: skipping (swiperHrElement, already handled)`)})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",initPageAnimations):initPageAnimations();