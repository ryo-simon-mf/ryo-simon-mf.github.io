const ANIMATION_DURATION={FAST:400,NORMAL:600,SLOW:800},GLITCH_CHARS="01@#$%&*[]{}01010101><~^+=?/\\|";function animateTextGlitch(t,e,a=ANIMATION_DURATION.SLOW){if(!t)return;const n=t.textContent||"",o=Math.max(n.length,e.length),r=performance.now(),i=Array.from({length:o},()=>.5*Math.random());requestAnimationFrame(function n(s){const c=s-r,l=Math.min(c/a,1);let y="";for(let t=0;t<o;t++){const a=Math.min(Math.max((l-i[t])/.5,0),1);a<1&&Math.random()>a?y+=GLITCH_CHARS[Math.floor(30*Math.random())]:y+=e[t]||""}t.textContent=y,l<1?requestAnimationFrame(n):t.textContent=e})}function animateTextTypewriter(t,e,a=ANIMATION_DURATION.SLOW){if(!t)return;t.textContent="";const n=performance.now();requestAnimationFrame(function o(r){const i=r-n,s=Math.min(i/a,1),c=Math.floor(e.length*s);s<1?(t.textContent=e.substring(0,c)+"â–Œ",requestAnimationFrame(o)):t.textContent=e})}function showAllContentImmediately(){const t=document.getElementById("content");if(!t)return;console.log("[Page Animations] Showing all content immediately (fallback mode)");t.querySelectorAll('[style*="opacity: 0"]').forEach(t=>{t.style.opacity="1",t.style.transform="none",t.style.transition="none"});const e=t.querySelector(".swiper-container");e&&(e.style.opacity="1");t.querySelectorAll("hr").forEach(t=>{t.style.opacity="1"});t.querySelectorAll("#content_in").forEach(t=>{t.style.opacity="1",t.style.transform="none",Array.from(t.children).forEach(t=>{t.style.opacity="1",t.style.transform="none"})}),["h2","h3","h4"].forEach(e=>{t.querySelectorAll(e).forEach(t=>{t.style.opacity="1"})})}function initPageAnimations(){try{const t=document.getElementById("content");if(!t)return void console.warn("[Page Animations] Content element not found");if(!("IntersectionObserver"in window))return console.warn("[Page Animations] IntersectionObserver not supported - using fallback"),void showAllContentImmediately();if(window.matchMedia("(prefers-reduced-motion: reduce)").matches){t.querySelectorAll('[style*="opacity: 0"]').forEach(t=>{t.style.opacity="1",t.style.transform="none"});const e=t.querySelector(".swiper-container");e&&(e.style.opacity="1");t.querySelectorAll("hr").forEach(t=>t.style.opacity="1");return void t.querySelectorAll("#content_in").forEach(t=>{t.style.opacity="1",t.style.transform="none",Array.from(t.children).forEach(t=>{t.style.opacity="1",t.style.transform="none"})})}let e=null;const a={root:null,rootMargin:"0px 0px -100px 0px",threshold:.1},n={root:null,rootMargin:"0px",threshold:.01},o=(new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&!t.target.dataset.animated&&(t.target.dataset.animated="true",t.target.classList.contains("scroll-animate")&&(t.target.style.opacity="1",t.target.style.transform="translateY(0)"))})},a),t.querySelector("h1"));if(o){const t=o.textContent.trim();setTimeout(()=>{animateTextGlitch(o,t,ANIMATION_DURATION.SLOW)},100)}const r=t.querySelector(".swiper-container");r&&(r.style.opacity="0",r.style.transition="opacity 0.8s ease",e=t.querySelector("hr.swiper-divider"),e&&(e.style.opacity="0",e.style.transition="opacity 0.8s ease"),setTimeout(()=>{r.style.opacity="1",e&&(e.style.opacity="1")},100));const i=t.querySelector("h2");if(i){const t=i.textContent.trim();i.style.opacity="0",i.style.transition="opacity 0.6s ease";new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&!e.target.dataset.animated&&(e.target.dataset.animated="true",setTimeout(()=>{e.target.style.opacity="1",animateTextGlitch(e.target,t,ANIMATION_DURATION.NORMAL)},100))})},a).observe(i)}const s=t.querySelector("h4");if(s){const t=s.textContent.trim();s.style.opacity="0",s.style.transition="opacity 0.6s ease";new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&!e.target.dataset.animated&&(e.target.dataset.animated="true",setTimeout(()=>{e.target.style.opacity="1",animateTextGlitch(e.target,t,ANIMATION_DURATION.NORMAL)},100))})},a).observe(s)}const c=t.querySelectorAll("h3");if(c.length>0){const t=c[0],e=t.querySelectorAll("a");t.style.opacity="0",t.style.transition="opacity 0.6s ease";new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&!t.target.dataset.animated&&(t.target.dataset.animated="true",t.target.style.opacity="1",e.forEach((t,e)=>{const a=t.textContent.trim();setTimeout(()=>{animateTextGlitch(t,a,ANIMATION_DURATION.NORMAL)},100*e)}))})},a).observe(t)}for(let t=1;t<c.length;t++){const e=c[t],n=e.textContent.trim();e.style.opacity="0",e.style.transition="opacity 0.6s ease";new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&!t.target.dataset.animated&&(t.target.dataset.animated="true",setTimeout(()=>{t.target.style.opacity="1",t.target.textContent="",animateTextTypewriter(t.target,n,ANIMATION_DURATION.SLOW)},100))})},a).observe(e)}t.querySelectorAll("#content_in").forEach((t,e)=>{t.style.opacity="0",t.style.transform="translateY(20px)",t.style.transition="opacity 0.4s ease, transform 0.4s ease";new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&!t.target.dataset.animated&&(t.target.dataset.animated="true",setTimeout(()=>{t.target.style.opacity="1",t.target.style.transform="translateY(0)";Array.from(t.target.children).forEach((t,e)=>{t.style.opacity="0",t.style.transform="translateY(10px)",t.style.transition="opacity 0.3s ease, transform 0.3s ease",setTimeout(()=>{t.style.opacity="1",t.style.transform="translateY(0)"},30*e)})},50))})},a).observe(t)});t.querySelectorAll("img").forEach((t,e)=>{t.style.opacity="0",t.style.transition="opacity 0.6s ease",t.complete?setTimeout(()=>{t.style.opacity="1"},300+50*e):t.addEventListener("load",()=>{setTimeout(()=>{t.style.opacity="1"},300+50*e)})});t.querySelectorAll("iframe").forEach((t,e)=>{t.style.opacity="0",t.style.transition="opacity 0.6s ease",setTimeout(()=>{t.style.opacity="1"},400+100*e)});const l=t.querySelectorAll("hr"),y=l.length;l.forEach((t,o)=>{if(0===o)return void(t.style.opacity="1");if(t===e)return;t.style.opacity="0",t.style.transition="opacity 0.8s ease";new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&!t.target.dataset.animated&&(t.target.dataset.animated="true",t.target.style.opacity="1")})},o>=y-2?n:a).observe(t)})}catch(t){console.error("[Page Animations] Animation initialization failed:",t),console.error("[Page Animations] Falling back to immediate content display");try{showAllContentImmediately()}catch(t){console.error("[Page Animations] Fallback also failed:",t),document.querySelectorAll('[style*="opacity: 0"]').forEach(t=>{t.style.opacity="1"})}}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",initPageAnimations):initPageAnimations();